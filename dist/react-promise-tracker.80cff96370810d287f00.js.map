{"version":3,"file":"react-promise-tracker.80cff96370810d287f00.js","sources":["webpack:///react-promise-tracker.80cff96370810d287f00.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{\"/+n4\":function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.promiseTrackerHoc=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(\"mXGw\")),o=r(\"AeD+\"),i=r(\"4eC5\");function u(e){return(u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.promiseTrackerHoc=function(e){return function(t){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,r),n=this,(t=!(o=f(r).call(this,e))||\"object\"!==u(o)&&\"function\"!=typeof o?c(n):o).state={promiseInProgress:!1,internalPromiseInProgress:!1,config:(0,i.setupConfig)(e.config)},t.notifyPromiseInProgress=t.notifyPromiseInProgress.bind(c(t)),t.updateProgress=t.updateProgress.bind(c(t)),t.subscribeToCounterUpdate=t.subscribeToCounterUpdate.bind(c(t)),t}var p,d,y;return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,n.Component),p=r,(d=[{key:\"notifyPromiseInProgress\",value:function(){var e=this;0===this.state.config.delay?this.setState({promiseInProgress:!0}):setTimeout(function(){e.setState({promiseInProgress:!0})},this.state.config.delay)}},{key:\"updateProgress\",value:function(e,t){this.setState({internalPromiseInProgress:e},t),e?this.notifyPromiseInProgress():this.setState({promiseInProgress:!1})}},{key:\"subscribeToCounterUpdate\",value:function(){var e=this;o.emitter.on(o.promiseCounterUpdateEventId,function(t,r){e.state.config.area===r&&e.updateProgress(t)})}},{key:\"componentDidMount\",value:function(){this.updateProgress(Boolean((0,o.getCounter)(this.state.config.area)>0),this.subscribeToCounterUpdate)}},{key:\"componentWillUnmount\",value:function(){o.emitter.off(o.promiseCounterUpdateEventId)}},{key:\"render\",value:function(){return n.default.createElement(e,a({},this.props,{config:this.state.config,promiseInProgress:this.state.promiseInProgress}))}}])&&s(p.prototype,d),y&&s(p,y),r}()}},\"4eC5\":function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.setupConfig=t.defaultConfig=void 0;var n=r(\"nR1Y\"),o={area:n.defaultArea,delay:0};t.defaultConfig=o;t.setupConfig=function(e){return{area:e&&e.area?e.area:n.defaultArea,delay:e&&e.delay?e.delay:0}}},\"AeD+\":function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.trackPromise=t.getCounter=t.promiseCounterUpdateEventId=t.emitter=void 0;var n=r(\"E2uo\"),o=r(\"nR1Y\");var i=new n.Emitter;t.emitter=i;t.promiseCounterUpdateEventId=\"promise-counter-update\";var u,a,s,f=(u={},a=o.defaultArea,s=0,a in u?Object.defineProperty(u,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[a]=s,u);t.getCounter=function(e){return f[e]};t.trackPromise=function(e,t){t=t||o.defaultArea,c(t);var r=l(t);i.emit(\"promise-counter-update\",r,t);var n=function(){return p(t)};return e.then(n,n),e};var c=function(e){Boolean(f[e])?f[e]++:f[e]=1},l=function(e){return f[e]>0},p=function(e){d(e);var t=l(e);i.emit(\"promise-counter-update\",t,e)},d=function(e){f[e]--}},E2uo:function(e,t,r){\"use strict\";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.Emitter=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}var t,r,o;return t=e,(r=[{key:\"emit\",value:function(e){if(!e)return this;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,u=void 0;try{for(var a,s=this._e(e)[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var f=a.value;f.apply(f.ctx,[].concat(r)),1==f.off_event&&this.off(e,f)}}catch(e){i=!0,u=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw u}}return this}},{key:\"on\",value:function(e,t,r){return e?(t.ctx=r,this._e(e).push(t),this):this}},{key:\"once\",value:function(e,t,r){return e?(t.ctx=r,t.off_event=!0,this.on(e,t)):this}},{key:\"off\",value:function(e,t){if(!e)return this;if(!this[e])return this;var r=this._e(e);return t?(this[e]=r.filter(function(e){return e!=t}),this):(delete this[e],this)}},{key:\"_e\",value:function(e){return this[e]||(this[e]=[])}}])&&n(t.prototype,r),o&&n(t,o),e}();t.Emitter=o},nR1Y:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.defaultArea=void 0;t.defaultArea=\"default-area\"},tFZE:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),Object.defineProperty(t,\"trackPromise\",{enumerable:!0,get:function(){return n.trackPromise}}),Object.defineProperty(t,\"promiseTrackerHoc\",{enumerable:!0,get:function(){return o.promiseTrackerHoc}}),Object.defineProperty(t,\"usePromiseTracker\",{enumerable:!0,get:function(){return i.usePromiseTracker}});var n=r(\"AeD+\"),o=r(\"/+n4\"),i=r(\"zgjU\")},zgjU:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.usePromiseTracker=void 0;var n,o=(n=r(\"mXGw\"))&&n.__esModule?n:{default:n},i=r(\"AeD+\"),u=r(\"4eC5\");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}t.usePromiseTracker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.defaultConfig,t=a(o.default.useState((0,u.setupConfig)(e)),1)[0];o.default.useEffect(function(){t&&t.area&&(0,i.getCounter)(t.area)>0&&(s(!0),l(!0))},t);var r=a(o.default.useState(!1),2),n=r[0],s=r[1],f=a(o.default.useState(!1),2),c=f[0],l=f[1],p=o.default.useRef(n),d=function(e,r){t.area===r&&(s(e),p.current=e,e?t&&t.delay&&0!==t.delay?setTimeout(function(){p.current&&l(!0)},t.delay):l(!0):l(!1))};return o.default.useEffect(function(){return p.current=n,i.emitter.on(i.promiseCounterUpdateEventId,function(e,t){d(e,t)}),function(){i.emitter.off(i.promiseCounterUpdateEventId)}},[]),{promiseInProgress:c}}}}]);"],"mappings":"AAAA","sourceRoot":""}